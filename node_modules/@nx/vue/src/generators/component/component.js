"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.componentGenerator = componentGenerator;
const devkit_1 = require("@nx/devkit");
const path_1 = require("path");
const utils_1 = require("./lib/utils");
async function componentGenerator(host, schema) {
    const options = await (0, utils_1.normalizeOptions)(host, schema);
    createComponentFiles(host, options);
    (0, utils_1.addExportsToBarrel)(host, options);
    if (!options.skipFormat) {
        await (0, devkit_1.formatFiles)(host);
    }
}
function createComponentFiles(host, options) {
    const specExt = options.js ? 'js' : 'ts';
    (0, devkit_1.generateFiles)(host, (0, path_1.join)(__dirname, './files'), options.directory, {
        ...options,
        isTs: !options.js,
        specExt,
        tmpl: '',
    });
    if (options.skipTests || options.inSourceTests) {
        host.delete((0, devkit_1.joinPathFragments)(options.directory, `${options.fileName}.spec.${specExt}`));
    }
}
exports.default = componentGenerator;
